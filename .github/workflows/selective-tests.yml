name: Focused Test Run (RPC, Lock, Speed)

on:
  push:
    branches: [ "add-pytests" ] # Runs when you push to your development branch
  workflow_dispatch: # Allows manual run from the GitHub Actions tab

jobs:
  tests:
    runs-on: ubuntu-latest
    timeout-minutes: 5 # Sets a hard limit on the job time

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11' 
          cache: 'pip' 

      - name: Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pytest pytest-xdist pandas # Includes packages needed for your files

      - name: Run Focused Tests
        # Use the specific file paths to run ONLY these 3 files
        # The '-k' flag is an alternative way to filter tests by name/pattern
        run: |
          pytest -v -n 1 --tb=short \
            tests/test_fr1_speed_alert.py \
            tests/test_fr2_door_lock.py \
            tests/test_fr7_rpc_speed_limit.py
